import{S as Y,i as J,s as Z,p as j,e as v,t as G,a as O,b as y,c as F,d as u,h as R,n as E,g as K,v as Q,A as X,B as Be,C as ye,D as H,q as Ie,E as U,F as Pe,m as N,G as x,o as L,H as ee,I as q,w as Ve,J as ie,K as Fe,z as Ke}from"./vendor.svelte-652fda4d.js";import{d as ne,i as le,h as Me,T as Te,n as re,a as Ne,b as Oe,c as Le,e as te,f as z,s as se,g as ae,C as Ge,j as Ae,k as Re}from"./lib-8cb74d00.js";function ce(o,e,r){const t=o.slice();return t[9]=e[r],t}function ue(o){let e,r,t,n,a,i,s=o[9][o[1]]+"",C,c,g,m,b=o[9][o[2]]+"",k,I,D,T,V,h,$=o[9][o[3]]+"",M,S,f=o[9].TotalCount+"",_,d,p;return{c(){e=v("div"),r=v("div"),t=v("div"),n=v("div"),a=v("span"),i=v("small"),C=G(s),c=G(":"),g=O(),m=v("span"),k=G(b),I=G("%"),D=O(),T=v("div"),V=v("span"),h=v("small"),M=G($),S=G(" of "),_=G(f),d=G(" orders"),p=O(),y(a,"class","text-muted"),y(n,"class","d-flex w-90 justify-content-between"),y(V,"class","text-muted"),y(T,"class","d-flex w-90 justify-content-center"),y(t,"class","card-body p-2"),y(r,"class","card text-dark"),y(e,"class","col-md-2")},m(P,B){F(P,e,B),u(e,r),u(r,t),u(t,n),u(n,a),u(a,i),u(i,C),u(i,c),u(n,g),u(n,m),u(m,k),u(m,I),u(t,D),u(t,T),u(T,V),u(V,h),u(h,M),u(h,S),u(h,_),u(h,d),u(e,p)},p(P,B){B&2&&s!==(s=P[9][P[1]]+"")&&R(C,s),B&4&&b!==(b=P[9][P[2]]+"")&&R(k,b),B&8&&$!==($=P[9][P[3]]+"")&&R(M,$)},d(P){P&&K(e)}}}function je(o){let e,r,t,n,a=j(o[4]),i=[];for(let s=0;s<a.length;s+=1)i[s]=ue(ce(o,a,s));return{c(){e=v("h6"),r=G(o[0]),t=O(),n=v("div");for(let s=0;s<i.length;s+=1)i[s].c();y(n,"class","row g-2 mb-3")},m(s,C){F(s,e,C),u(e,r),F(s,t,C),F(s,n,C);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null)},p(s,[C]){if(C&1&&R(r,s[0]),C&30){a=j(s[4]);let c;for(c=0;c<a.length;c+=1){const g=ce(s,a,c);i[c]?i[c].p(g,C):(i[c]=ue(g),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},i:E,o:E,d(s){s&&(K(e),K(t),K(n)),Q(i,s)}}}function He(o,e,r){let{rows:t}=e,{title:n="Driver Stats"}=e,{driver_field:a="Driver"}=e,{pct_field:i}=e,{count_field:s}=e,{sort_asc:C=!0}=e,c=i,g=C?(b,k)=>b[c]-k[c]:(b,k)=>k[c]-b[c],m=t.sort(g);return o.$$set=b=>{"rows"in b&&r(5,t=b.rows),"title"in b&&r(0,n=b.title),"driver_field"in b&&r(1,a=b.driver_field),"pct_field"in b&&r(2,i=b.pct_field),"count_field"in b&&r(3,s=b.count_field),"sort_asc"in b&&r(6,C=b.sort_asc)},[n,a,i,s,m,t,C]}class Ue extends Y{constructor(e){super(),J(this,e,He,je,Z,{rows:5,title:0,driver_field:1,pct_field:2,count_field:3,sort_asc:6})}}function de(o,e,r){const t=o.slice();return t[10]=e[r],t}function fe(o,e,r){const t=o.slice();return t[13]=e[r],t}function _e(o,e,r){const t=o.slice();return t[16]=e[r],t}function me(o){let e,r,t,n,a,i,s=o[10][o[16].b]+"",C;return{c(){e=v("div"),r=v("span"),t=v("small"),t.textContent=`${o[16].a}:`,n=O(),a=v("span"),i=v("small"),C=G(s),y(r,"class","text-muted"),y(e,"class","d-flex justify-content-between mx-2")},m(c,g){F(c,e,g),u(e,r),u(r,t),u(e,n),u(e,a),u(a,i),u(i,C)},p(c,g){g&1&&s!==(s=c[10][c[16].b]+"")&&R(C,s)},d(c){c&&K(e)}}}function he(o){let e,r,t=o[13]+"",n;return{c(){e=v("li"),r=v("small"),n=G(t)},m(a,i){F(a,e,i),u(e,r),u(r,n)},p(a,i){i&1&&t!==(t=a[13]+"")&&R(n,t)},d(a){a&&K(e)}}}function pe(o){let e,r,t,n,a,i,s=o[10].ord_hdrnumber+"",C,c,g,m,b,k,I,D,T,V,h=j(o[2]),$=[];for(let f=0;f<h.length;f+=1)$[f]=me(_e(o,h,f));let M=j(o[1](o[10])),S=[];for(let f=0;f<M.length;f+=1)S[f]=he(fe(o,M,f));return{c(){e=v("div"),r=v("div"),t=v("div"),n=v("span"),n.textContent="Order:",a=O(),i=v("span"),C=G(s),c=O(),g=v("div");for(let f=0;f<$.length;f+=1)$[f].c();m=O(),b=v("div"),k=v("p"),k.textContent="Reasons for DNI:",I=O(),D=v("ul");for(let f=0;f<S.length;f+=1)S[f].c();V=O(),y(t,"class","card-header bg-light text-dark d-flex justify-content-between"),y(k,"class","border-bottom text-center"),y(b,"class","alert alert-light border-info mt-3"),y(g,"class","card-body p-2"),y(r,"class",T="card text-dark "+o[3](o[10])),y(e,"class","col-md-4")},m(f,_){F(f,e,_),u(e,r),u(r,t),u(t,n),u(t,a),u(t,i),u(i,C),u(r,c),u(r,g);for(let d=0;d<$.length;d+=1)$[d]&&$[d].m(g,null);u(g,m),u(g,b),u(b,k),u(b,I),u(b,D);for(let d=0;d<S.length;d+=1)S[d]&&S[d].m(D,null);u(e,V)},p(f,_){if(_&1&&s!==(s=f[10].ord_hdrnumber+"")&&R(C,s),_&5){h=j(f[2]);let d;for(d=0;d<h.length;d+=1){const p=_e(f,h,d);$[d]?$[d].p(p,_):($[d]=me(p),$[d].c(),$[d].m(g,m))}for(;d<$.length;d+=1)$[d].d(1);$.length=h.length}if(_&3){M=j(f[1](f[10]));let d;for(d=0;d<M.length;d+=1){const p=fe(f,M,d);S[d]?S[d].p(p,_):(S[d]=he(p),S[d].c(),S[d].m(D,null))}for(;d<S.length;d+=1)S[d].d(1);S.length=M.length}_&1&&T!==(T="card text-dark "+f[3](f[10]))&&y(r,"class",T)},d(f){f&&K(e),Q($,f),Q(S,f)}}}function qe(o){let e,r=j(o[0]),t=[];for(let n=0;n<r.length;n+=1)t[n]=pe(de(o,r,n));return{c(){e=v("div");for(let n=0;n<t.length;n+=1)t[n].c();y(e,"class","row g-2 mb-3")},m(n,a){F(n,e,a);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,[a]){if(a&15){r=j(n[0]);let i;for(i=0;i<r.length;i+=1){const s=de(n,r,i);t[i]?t[i].p(s,a):(t[i]=pe(s),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=r.length}},i:E,o:E,d(n){n&&K(e),Q(t,n)}}}function Ee(o,e,r){let t;X(o,ne,k=>r(5,t=k));const n=t;let{rows:a}=e,{kpi:i}=e;const s=[{title:"No Freight BOLs",flag:1},{title:"A Freight BOL is missing",flag:2},{title:"A Freight BOL is not Alphanumeric",flag:4},{title:"A Freight BOL is too short",flag:8},{title:"A Freight has Zero Gallons",flag:16},{title:"Freight/Order mismatch",flag:32},{title:"A Freight has 300 Gross Gallons",flag:64},{title:"RefNum of all 0s found",flag:128}],C=k=>{let I=s.filter(D=>(k.errormask&D.flag)===D.flag).map(D=>D.title);return I.length===0?["Unknown"]:I},c=[{a:"BillTo",b:"ord_billto"},{a:"Shipper",b:"ord_shipper"},{a:"Consignee",b:"ord_consignee"},{a:"Delivered",b:"ord_completiondate"},{a:"Driver",b:"ord_driver1"}],g=k=>le(n,k[i.mpf]),m=k=>Me(n,k[i.mpf]),b=k=>g(k)?m(k)?"has-one-paperwork":"missing-paperwork":"";return o.$$set=k=>{"rows"in k&&r(0,a=k.rows),"kpi"in k&&r(4,i=k.kpi)},[a,C,c,b,i]}class We extends Y{constructor(e){super(),J(this,e,Ee,qe,Z,{rows:0,kpi:4})}}function ge(o){let e,r=o[6]()+"";return{c(){e=v("td")},m(t,n){F(t,e,n),e.innerHTML=r},p:E,d(t){t&&K(e)}}}function ve(o){let e,r,t;return{c(){e=v("button"),e.textContent="CSV",y(e,"class","btn btn-sm btn-secondary")},m(n,a){F(n,e,a),r||(t=Ve(e,"click",o[9]),r=!0)},p:E,d(n){n&&K(e),r=!1,t()}}}function be(o){let e,r,t,n,a;const i=[Ye,Qe,ze],s=[];function C(c,g){return c[1].isDriverStats?0:c[1].isDNI?1:2}return t=C(o),n=s[t]=i[t](o),{c(){e=v("tr"),r=v("td"),n.c(),y(r,"colspan",o[5])},m(c,g){F(c,e,g),u(e,r),s[t].m(r,null),a=!0},p(c,g){let m=t;t=C(c),t===m?s[t].p(c,g):(x(),L(s[m],1,1,()=>{s[m]=null}),ee(),n=s[t],n?n.p(c,g):(n=s[t]=i[t](c),n.c()),N(n,1),n.m(r,null))},i(c){a||(N(n),a=!0)},o(c){L(n),a=!1},d(c){c&&K(e),s[t].d()}}}function ze(o){let e,r;return e=new Oe({props:{headers:o[1].hdrs,rows:o[7](o[3])}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.headers=t[1].hdrs),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Qe(o){let e,r;return e=new We({props:{rows:o[3],kpi:o[1]}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.kpi=t[1]),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Ye(o){let e,r;return e=new Ue({props:{rows:o[3],pct_field:"SuccessRate",count_field:"SuccessCount"}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p:E,i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Je(o){let e,r,t=o[0].key+"",n,a,i,s=o[1].sumv(o[0],o[3])+"",C,c,g,m,b,k,I,D,T,V,h=o[1].showMPS&&ge(o);function $(_){o[8](_)}let M={};o[2]!==void 0&&(M.show=o[2]),b=new Te({props:M}),Be.push(()=>ye(b,"show",$));let S=!o[1].isDriverStats&&!o[1].isDNI&&ve(o),f=o[2]&&be(o);return{c(){e=v("tr"),r=v("td"),n=G(t),a=O(),i=v("td"),C=G(s),c=O(),h&&h.c(),g=O(),m=v("td"),H(b.$$.fragment),I=O(),S&&S.c(),D=O(),f&&f.c(),T=Ie(),y(r,"class","text-start"),y(m,"class","p-0"),y(e,"class","text-end")},m(_,d){F(_,e,d),u(e,r),u(r,n),u(e,a),u(e,i),u(i,C),u(e,c),h&&h.m(e,null),u(e,g),u(e,m),U(b,m,null),u(m,I),S&&S.m(m,null),F(_,D,d),f&&f.m(_,d),F(_,T,d),V=!0},p(_,[d]){(!V||d&1)&&t!==(t=_[0].key+"")&&R(n,t),(!V||d&3)&&s!==(s=_[1].sumv(_[0],_[3])+"")&&R(C,s),_[1].showMPS?h?h.p(_,d):(h=ge(_),h.c(),h.m(e,g)):h&&(h.d(1),h=null);const p={};!k&&d&4&&(k=!0,p.show=_[2],Pe(()=>k=!1)),b.$set(p),!_[1].isDriverStats&&!_[1].isDNI?S?S.p(_,d):(S=ve(_),S.c(),S.m(m,null)):S&&(S.d(1),S=null),_[2]?f?(f.p(_,d),d&4&&N(f,1)):(f=be(_),f.c(),N(f,1),f.m(T.parentNode,T)):f&&(x(),L(f,1,1,()=>{f=null}),ee())},i(_){V||(N(b.$$.fragment,_),N(f),V=!0)},o(_){L(b.$$.fragment,_),L(f),V=!1},d(_){_&&(K(e),K(D),K(T)),h&&h.d(),q(b),S&&S.d(),f&&f.d(_)}}}function Ze(o,e,r){let t;X(o,ne,h=>r(10,t=h));const n=t;let{tt:a}=e,{kpi:i}=e;const s=i.rows.filter(h=>h[i.kfil]===a.key).map(h=>i.mapf(h));let C=`${i.KPI} - ${a.key}`,c=!1;const g=(h,$)=>$.showMPS&&$.mpf?s.filter(M=>le(h,M[$.mpf])).map(M=>parseFloat(M.ivh_totalcharge)):[],m=i.showMPS&&g(n,i),b=i.showMPS?4:3,k=()=>m.length>0?i.isInvoice?`$${re(m.reduce((h,$)=>h+$),2)} (${m.length})`:`${m.length}&nbsp;❌&nbsp;`:"&nbsp;✔️&nbsp;",I=h=>le(n,h[i.mpf])?Le(n,h[i.mpf])?"has-multiple-pages":Me(n,h[i.mpf])?"has-one-paperwork":"missing-paperwork":"",D=h=>h.map($=>({...$,rowclass:I($)}));function T(h){c=h,r(2,c)}const V=()=>Ne(s,i.hdrs,C);return o.$$set=h=>{"tt"in h&&r(0,a=h.tt),"kpi"in h&&r(1,i=h.kpi)},[a,i,c,s,C,b,k,D,T,V]}class Xe extends Y{constructor(e){super(),J(this,e,Ze,Je,Z,{tt:0,kpi:1})}}function ke(o,e,r){const t=o.slice();return t[10]=e[r],t}function xe(o){let e,r,t;return{c(){e=v("tr"),r=v("td"),t=v("small"),t.textContent=`Missing Paperwork: ${o[4]()}`,y(t,"class","text-muted missing-paperwork"),y(r,"colspan","2"),y(r,"class","text-end pt-0")},m(n,a){F(n,e,a),u(e,r),u(r,t)},p:E,d(n){n&&K(e)}}}function we(o){let e,r,t,n,a,i,s,C,c,g,m,b=o[0].thdr+"",k,I,D,T,V,h,$;function M(B,l){return l&1&&(C=null),l&1&&(c=null),C==null&&(C=B[0].kfil.toLowerCase()==="ord_status"),C?lt:(c==null&&(c=B[0].kfil.toLowerCase()==="date"),c?tt:et)}let S=M(o,-1),f=S(o),_=o[0].showMPS&&Ce(),d=j(o[2]),p=[];for(let B=0;B<d.length;B+=1)p[B]=$e(ke(o,d,B));const P=B=>L(p[B],1,1,()=>{p[B]=null});return{c(){e=v("tr"),r=v("td"),t=v("div"),n=v("table"),a=v("thead"),i=v("tr"),s=v("th"),f.c(),g=O(),m=v("th"),k=G(b),I=O(),_&&_.c(),D=O(),T=v("th"),V=O(),h=v("tbody");for(let B=0;B<p.length;B+=1)p[B].c();y(s,"class","text-start"),y(i,"class","table-dark text-end"),y(n,"class","table table-borderless align-middle"),y(t,"class","table-responsive m-0 mt-2 m-lg-4"),y(r,"colspan","4")},m(B,l){F(B,e,l),u(e,r),u(r,t),u(t,n),u(n,a),u(a,i),u(i,s),f.m(s,null),u(i,g),u(i,m),u(m,k),u(i,I),_&&_.m(i,null),u(i,D),u(i,T),u(n,V),u(n,h);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(h,null);$=!0},p(B,l){if(S!==(S=M(B,l))&&(f.d(1),f=S(B),f&&(f.c(),f.m(s,null))),(!$||l&1)&&b!==(b=B[0].thdr+"")&&R(k,b),B[0].showMPS?_||(_=Ce(),_.c(),_.m(i,D)):_&&(_.d(1),_=null),l&5){d=j(B[2]);let w;for(w=0;w<d.length;w+=1){const A=ke(B,d,w);p[w]?(p[w].p(A,l),N(p[w],1)):(p[w]=$e(A),p[w].c(),N(p[w],1),p[w].m(h,null))}for(x(),w=d.length;w<p.length;w+=1)P(w);ee()}},i(B){if(!$){for(let l=0;l<d.length;l+=1)N(p[l]);$=!0}},o(B){p=p.filter(Boolean);for(let l=0;l<p.length;l+=1)L(p[l]);$=!1},d(B){B&&K(e),f.d(),_&&_.d(),Q(p,B)}}}function et(o){let e;return{c(){e=G("Terminal")},m(r,t){F(r,e,t)},d(r){r&&K(e)}}}function tt(o){let e;return{c(){e=G("Date")},m(r,t){F(r,e,t)},d(r){r&&K(e)}}}function lt(o){let e;return{c(){e=G("Status")},m(r,t){F(r,e,t)},d(r){r&&K(e)}}}function Ce(o){let e;return{c(){e=v("th"),e.textContent="Missing Paperwork"},m(r,t){F(r,e,t)},d(r){r&&K(e)}}}function $e(o){let e,r;return e=new Xe({props:{tt:o[10],kpi:o[0]}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,n){const a={};n&1&&(a.kpi=t[0]),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function rt(o){let e,r,t=o[0].KPI+"",n,a,i,s=o[0].Current+"",C,c,g,m=o[0].Goal+"",b,k,I,D,T,V,h,$,M;function S(p){o[5](p)}let f={};o[1]!==void 0&&(f.show=o[1]),D=new Te({props:f}),Be.push(()=>ye(D,"show",S));let _=o[3]&&xe(o),d=o[1]&&we(o);return{c(){e=v("tr"),r=v("td"),n=G(t),a=O(),i=v("td"),C=G(s),c=O(),g=v("td"),b=G(m),k=O(),I=v("td"),H(D.$$.fragment),V=O(),_&&_.c(),h=O(),d&&d.c(),$=Ie(),y(r,"class","text-start"),y(e,"class","text-end")},m(p,P){F(p,e,P),u(e,r),u(r,n),u(e,a),u(e,i),u(i,C),u(e,c),u(e,g),u(g,b),u(e,k),u(e,I),U(D,I,null),F(p,V,P),_&&_.m(p,P),F(p,h,P),d&&d.m(p,P),F(p,$,P),M=!0},p(p,[P]){(!M||P&1)&&t!==(t=p[0].KPI+"")&&R(n,t),(!M||P&1)&&s!==(s=p[0].Current+"")&&R(C,s),(!M||P&1)&&m!==(m=p[0].Goal+"")&&R(b,m);const B={};!T&&P&2&&(T=!0,B.show=p[1],Pe(()=>T=!1)),D.$set(B),p[3]&&_.p(p,P),p[1]?d?(d.p(p,P),P&2&&N(d,1)):(d=we(p),d.c(),N(d,1),d.m($.parentNode,$)):d&&(x(),L(d,1,1,()=>{d=null}),ee())},i(p){M||(N(D.$$.fragment,p),N(d),M=!0)},o(p){L(D.$$.fragment,p),L(d),M=!1},d(p){p&&(K(e),K(V),K(h),K($)),q(D),_&&_.d(p),d&&d.d(p)}}}function nt(o,e,r){let t;X(o,ne,k=>r(6,t=k));let{kpi:n}=e;const a=n.tsum(n.rows);let i=!1;const s=t,C=(k,I)=>I.showMPS&&I.mpf?I.rows.filter(D=>le(k,D[I.mpf])).map(D=>parseFloat(D.ivh_totalcharge)):[],c=n.showMPS&&C(s,n),g=n.showMPS&&c.length!==0,m=()=>{let k=c.length;return n.isInvoice&&(k+=` ($${re(c.reduce((I,D)=>I+D)/1e3,0)}k)`),k};function b(k){i=k,r(1,i)}return o.$$set=k=>{"kpi"in k&&r(0,n=k.kpi)},[n,i,a,g,m,b]}class ot extends Y{constructor(e){super(),J(this,e,nt,rt,Z,{kpi:0})}}const it=async o=>{const e=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"}),r=l=>`${l.length}`,t=l=>`$${(l.reduce((w,{ivh_totalcharge:A})=>w+A,0)/1e3).toFixed(0)}k`.replace("$0","<$1"),n=l=>`${r(l)} (${t(l)})`,a=l=>`$${(l.reduce((w,{pyd_amount:A})=>w+A,0)/1e3).toFixed(0)}k`.replace("$0","<$1"),i=l=>`${r(l)} (${a(l)})`,s=o,C=s.BillingV1.LostAccessorialsV1.map(l=>({...l,Date:l.ivh_billdate.substring(0,10)})),c=s.EbeV1.MobileCaptureV1,g=s.BillingV1.ManualCompletionsV1,m=s.BillingV1.NonCompletionsV1,b=s.BillingV1.LateCompletionsV1,k=l=>w=>w.ivh_invoicestatus===l,I=s.BillingV1.InvoicesV1.filter(k("HLD")),D=s.BillingV1.InvoicesV1.filter(k("HLA")),T=s.EbeV1.MissingPaperworkV1,V=T.filter(l=>te(l.ord_completiondate,s.BillingV1.tds)>3),h=s.BillingV1.OrdersV1,$=h.filter(l=>te(l.ord_completiondate,s.BillingV1.tds)>3),M=s.BillingV1.UnrateableV1,S=I.filter(l=>te(l.ivh_deliverydate,s.BillingV1.tds)>8),f=Object.values(S),_=I.filter(l=>[5,6,7,8].includes(te(l.ivh_deliverydate,s.BillingV1.tds))),d=Object.values(_),p={hdrs:"Number,BillTo,Shipper,Consignee,Delivered,Driver1".split(","),mapf:l=>({ord_hdrnumber:l.ord_hdrnumber,ord_billto:l.ord_billto,ord_shipper:l.ord_shipper,ord_consignee:l.ord_consignee,ord_completiondate:e(l.ord_completiondate),ord_driver1:l.ord_driver1,errormask:l.reason}),sumv:l=>`${l.val.toFixed(0)}`,isDNI:!0,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1",mpf:"ord_hdrnumber",showMPS:!0},P={hdrs:"Number,Status,BillTo,Shipper,Consignee,Shipped,Delivered,Total,Qty,Ref_Num".split(","),mapf:l=>({ivh_invoicenumber:l.ivh_invoicenumber,ivh_invoicestatus:l.ivh_invoicestatus,ivh_billto:l.ivh_billto,ivh_shipper:l.ivh_shipper,ivh_consignee:l.ivh_consignee,ivh_shipdate:e(l.ivh_shipdate),ivh_deliverydate:e(l.ivh_deliverydate),ivh_totalcharge:l.ivh_totalcharge.toFixed(2),ivh_quantity:l.ivh_quantity,ref_number:l.ref_number}),sumv:(l,w)=>`$${re(l.val,2)} (${w.length})`,isInvoice:!0,tsum:l=>ae(l,"ivh_revtype1","ivh_totalcharge"),kfil:"ivh_revtype1",thdr:"Amount (Count)",mpf:"ivh_invoicenumber"};return[{KPI:"Non-Completions (45 days)",Current:`${m.length}`,Goal:"20",rt:"aciBilling10",rows:m,thdr:"Count",hdrs:"Age,Number,BillTo,CompletionDate,Driver1,Status,InvStatus".split(","),mapf:l=>({age:l.age,ord_hdrnumber:l.ord_hdrnumber,ord_billto:l.ord_billto,ord_completiondate:e(l.ord_completiondate),ord_driver1:l.ord_driver1,ord_status:l.ord_status,ord_invoicestatus:l.ord_invoicestatus}),sumv:l=>`${l.val.toFixed(0)}`,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1"},{KPI:"Late Completions (45 days)",Current:`${b.length}`,Goal:"350",rt:"aciBilling11",rows:b,thdr:"Count",hdrs:"Age,Number,BillTo,Driver1,Completed,Updated,Note,UpdatedBy".split(","),mapf:l=>({age:l.age,ord_hdrnumber:l.ord_hdrnumber,ord_billto:l.ord_billto,ord_driver1:l.ord_driver1,ord_completiondate:e(l.ord_completiondate),updated_dt:e(l.updated_dt),update_note:l.update_note,updated_by:l.updated_by}),sumv:l=>`${l.val.toFixed(0)}`,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1"},{KPI:"Order Completion Success",Current:`${(()=>{const l=g,w=l.map(W=>parseInt(W.ManualCompletionCount)).reduce((W,oe)=>W+oe),A=l.map(W=>parseInt(W.TotalCount)).reduce((W,oe)=>W+oe);return`${100-(w*100/A).toFixed(0)}%`})()}`,Goal:"95%",rt:"aciBilling7v2",rows:g,hdrs:"Driver,ManualCompletionCount,TotalCount".split(","),mapf:l=>({SuccessCount:l.TotalCount-l.ManualCompletionCount,SuccessRate:Math.round(100*(l.TotalCount-l.ManualCompletionCount)/l.TotalCount),...l}),sumv:l=>`(${l.SuccessCount}/${l.TotalCount}) ${l.SuccessRate.toFixed(0)}%`,thdr:"Order Completion Success",tsum:l=>se(l,"Terminal","ManualCompletionCount","TotalCount").map(w=>({key:w.Terminal,SuccessCount:w.TotalCount-w.ManualCompletionCount,SuccessRate:Math.round(100*(w.TotalCount-w.ManualCompletionCount)/w.TotalCount),...w})).sort((w,A)=>A.SuccessRate-w.SuccessRate),kfil:"Terminal",isDriverStats:!0},{KPI:"Mobile Capture Success",Current:`${(c.map(l=>parseInt(l.DriverScanCount)).reduce((l,w)=>l+w)*100/c.map(l=>parseInt(l.TotalCount)).reduce((l,w)=>l+w)).toFixed(0)}%`,Goal:"95%",rt:"aciBilling9",rows:c,hdrs:"Driver,DriverScanCount,TotalCount".split(","),mapf:l=>({SuccessCount:l.DriverScanCount,SuccessRate:Math.round(100*l.DriverScanCount/l.TotalCount),...l}),sumv:l=>`${l.SuccessRate.toFixed(0)}%`,thdr:"Driver Scan %",tsum:l=>se(l,"Terminal","DriverScanCount","TotalCount").map(w=>({key:w.Terminal,SuccessCount:w.DriverScanCount,SuccessRate:Math.round(100*w.DriverScanCount/w.TotalCount),...w})).sort((w,A)=>A.SuccessRate-w.SuccessRate),kfil:"Terminal",isDriverStats:!0},{KPI:"Missing Paperwork > 3 Days",Current:V.length,Goal:"< 50",rt:"aciBilling2a",rows:V,thdr:"Amount (Count)",hdrs:"Number,InvStatus,BillTo,Shipper,Consignee,Delivered,Driver1,Missing".split(","),mapf:l=>({ord_hdrnumber:l.ord_hdrnumber,ord_invoicestatus:l.ord_invoicestatus,ord_billto:l.ord_billto,ord_shipper:l.ord_shipper,ord_consignee:l.ord_consignee,ord_completiondate:e(l.ord_completiondate),ord_driver1:l.ord_driver1,missing:l.missing}),sumv:l=>`${l.val.toFixed(0)}`,isOrder:!0,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1",mpf:"ord_hdrnumber"},{KPI:"Missing Paperwork - Total",Current:T.length,Goal:"< 350",rt:"aciBilling2a",rows:T,thdr:"Amount (Count)",hdrs:"Number,InvStatus,BillTo,Shipper,Consignee,Delivered,Driver1,Missing".split(","),mapf:l=>({ord_hdrnumber:l.ord_hdrnumber,ord_invoicestatus:l.ord_invoicestatus,ord_billto:l.ord_billto,ord_shipper:l.ord_shipper,ord_consignee:l.ord_consignee,ord_completiondate:e(l.ord_completiondate),ord_driver1:l.ord_driver1,missing:l.missing}),sumv:l=>`${l.val.toFixed(0)}`,isOrder:!0,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1",mpf:"ord_hdrnumber"},{KPI:"Lost Accessorials",Current:i(C),Goal:"0",rt:"aciBilling13",rows:C,hdrs:"Terminal,BillTo,Invoice#,Description,Qty,Amount,Who,When,Status".split(","),mapf:l=>({ivh_revtype1:l.ivh_revtype1,ivh_billto:l.ivh_billto,ivh_invoicenumber:l.ivh_invoicenumber,pyt_description:l.pyt_description,pyd_quantity:l.pyd_quantity,pyd_amount:l.pyd_amount,pyd_createdby:l.pyd_createdby,pyd_createdon:e(l.pyd_createdon),ivh_invoicestatus:l.ivh_invoicestatus}),sumv:(l,w)=>`$${re(l.val,2)} (${w.length})`,thdr:"Amount (Count)",tsum:l=>ae(l,"Date","pyd_amount").sort((w,A)=>A.key.localeCompare(w.key)),kfil:"Date"},{KPI:"Do Not Invoice > 3 Days",Current:`${$.length}`,Goal:"= 0",rt:"aciBilling5",rows:$,thdr:"Count",...p},{KPI:"Do Not Invoice - Total",Current:`${h.length}`,Goal:"< 50",rt:"aciBilling5",rows:h,thdr:"Count",...p},{KPI:"Unable to be Rated",Current:`${M.length}`,Goal:"",rt:"aciBilling8",rows:M,thdr:"Count",hdrs:"Number,BillTo,Shipper,Consignee,Delivered,Driver1".split(","),mapf:l=>({ord_hdrnumber:l.ord_hdrnumber,ord_billto:l.ord_billto,ord_shipper:l.ord_shipper,ord_consignee:l.ord_consignee,ord_completiondate:e(l.ord_completiondate),ord_driver1:l.ord_driver1}),sumv:l=>`${l.val.toFixed(0)}`,isOrder:!0,tsum:l=>z(l,"ord_revtype1","ord_hdrnumber"),kfil:"ord_revtype1",mpf:"ord_hdrnumber",showMPS:!0},{KPI:"On Hold for Audit",Current:r(D),Goal:"< 50",rt:"aciBilling4",rows:D,showMPS:!0,...P},{KPI:"Unbilled older than 1 week",Current:n(f),Goal:"< 60",rt:"aciBilling6",rows:f,showMPS:!0,...P},{KPI:"Unbilled 4-7 Days Old",Current:n(d),Goal:"< 250",rt:"aciBilling6a",rows:d,showMPS:!0,...P},{KPI:"Unbilled Revenue - Total",Current:t(I),Goal:"< $350k",rt:"aciBilling1",rows:I,showMPS:!0,...P}]};function Se(o,e,r){const t=o.slice();return t[5]=e[r],t}function st(o){let e,r;return e=new Ae({props:{error:o[8]}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.error=t[8]),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function at(o){let e,r,t,n,a,i=j(o[4]),s=[];for(let c=0;c<i.length;c+=1)s[c]=De(Se(o,i,c));const C=c=>L(s[c],1,1,()=>{s[c]=null});return{c(){e=v("table"),r=v("thead"),r.innerHTML='<tr class="text-end table-light"><th class="text-start">KPI</th> <th>Current</th> <th>Goal</th> <th></th></tr>',t=O(),n=v("tbody");for(let c=0;c<s.length;c+=1)s[c].c();y(e,"class","table table-borderless table-sm align-middle")},m(c,g){F(c,e,g),u(e,r),u(e,t),u(e,n);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(n,null);a=!0},p(c,g){if(g&10){i=j(c[4]);let m;for(m=0;m<i.length;m+=1){const b=Se(c,i,m);s[m]?(s[m].p(b,g),N(s[m],1)):(s[m]=De(b),s[m].c(),N(s[m],1),s[m].m(n,null))}for(x(),m=i.length;m<s.length;m+=1)C(m);ee()}},i(c){if(!a){for(let g=0;g<i.length;g+=1)N(s[g]);a=!0}},o(c){s=s.filter(Boolean);for(let g=0;g<s.length;g+=1)L(s[g]);a=!1},d(c){c&&K(e),Q(s,c)}}}function De(o){let e,r;return e=new ot({props:{kpi:o[5]}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.kpi=t[5]),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function ct(o){let e,r;return e=new Re({}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p:E,i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function ut(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:ct,then:at,catch:st,value:4,error:8,blocks:[,,,]};return ie(r=o[3](o[1]),n),{c(){e=v("div"),n.block.c(),y(e,"class","table-responsive m-0 mt-2 m-lg-4")},m(a,i){F(a,e,i),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null,t=!0},p(a,i){o=a,n.ctx=o,i&2&&r!==(r=o[3](o[1]))&&ie(r,n)||Fe(n,o,i)},i(a){t||(N(n.block),t=!0)},o(a){for(let i=0;i<3;i+=1){const s=n.blocks[i];L(s)}t=!1},d(a){a&&K(e),n.block.d(),n.token=null,n=null}}}function dt(o){let e,r;return e=new Ge({props:{size:ft,title:_t,tds:o[0],$$slots:{default:[ut]},$$scope:{ctx:o}}}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p(t,[n]){const a={};n&1&&(a.tds=t[0]),n&514&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}const ft=12,_t="Billing";function mt(o,e,r){let t,n;X(o,ne,s=>r(1,n=s));const a=Ke(new Date);return X(o,a,s=>r(0,t=s)),[t,n,a,async s=>{const c=s.BillingV1,g=await it(s);return a.set(c.tds),g}]}class ht extends Y{constructor(e){super(),J(this,e,mt,dt,Z,{})}}function pt(o){let e,r;return e=new ht({}),{c(){H(e.$$.fragment)},m(t,n){U(e,t,n),r=!0},p:E,i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}class kt extends Y{constructor(e){super(),J(this,e,null,pt,Z,{})}}export{kt as B};
